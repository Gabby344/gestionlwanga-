<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ajouter un Enseignant - Institut Saint Charles Lwanga</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bleu-fonce: #1e40af;
  --gris-fonce: #1f2937;
  --indigo-enseignants: #4f46e5;
  --vert-action: #10b981;
  --orange-alerte: #f59e0b;
  --rouge-danger: #ef4444;
  --fond-principal: #f4f6f8;
  --ombre-legere: rgba(0,0,0,0.08);
}
body {
  font-family: 'Inter', sans-serif;
  background-color: var(--fond-principal);
  margin:0; padding:2rem 1rem; color:var(--gris-fonce);
}
.container {
  max-width:600px;
  margin:auto;
  background:white;
  padding:2rem;
  border-radius:8px;
  box-shadow:0 4px 10px var(--ombre-legere);
}
h1{ text-align:center; color:var(--indigo-enseignants); margin-bottom:0.5rem;}
h2{ text-align:center; font-size:1rem; color:#6b7280; margin-bottom:2rem;}
form {display:grid; gap:1rem;}
label {display:block; font-weight:600; margin-bottom:0.3rem;}
input, select {width:100%; padding:0.6rem; border-radius:4px; border:1px solid #d1d5db;}
.btn-submit {background-color:var(--indigo-enseignants); color:white; font-weight:600; padding:0.75rem; border:none; border-radius:4px; cursor:pointer;}
.btn-submit:hover{background-color:#3730a3;}
.btn-retour{display:block;text-align:center;margin-top:1.5rem;text-decoration:none;color:var(--gris-fonce);font-size:0.9rem;}
.success-msg{color:var(--vert-action); font-weight:600; text-align:center; margin-top:1rem;}
.error-msg{color:var(--rouge-danger); font-weight:600; text-align:center; margin-top:1rem;}
</style>
</head>
<body>

<div class="container">
<h1>‚ûï Ajouter un Enseignant</h1>
<h2>Remplissez le formulaire pour enregistrer un nouveau membre du personnel</h2>

<form id="ajouterEnseignantForm">
  <div>
    <label for="nom">Nom</label>
    <input type="text" id="nom" required>
  </div>
  <div>
    <label for="postNom">Post-nom</label>
    <input type="text" id="postNom" required>
  </div>
  <div>
    <label for="prenom">Pr√©nom</label>
    <input type="text" id="prenom" required>
  </div>
  <div>
    <label for="titre">Titre / Fonction</label>
    <select id="titre" required>
      <option value="">S√©lectionner</option>
      <option value="Professeur">Professeur</option>
      <option value="Directeur">Directeur</option>
      <option value="Secr√©taire">Secr√©taire</option>
    </select>
  </div>
  <div>
    <label for="statut">Statut Contrat</label>
    <select id="statut" required>
      <option value="">S√©lectionner</option>
      <option value="Permanent">Permanent</option>
      <option value="Vacataire">Vacataire</option>
      <option value="Administratif">Administratif</option>
    </select>
  </div>
  <div>
    <label for="matiere">Mati√®re principale</label>
    <input type="text" id="matiere" placeholder="Ex: Math√©matiques" required>
  </div>
  <button type="submit" class="btn-submit">üíæ Enregistrer</button>
  <p class="success-msg" id="successMsg"></p>
  <p class="error-msg" id="errorMsg"></p>
</form>

<a href="liste-enseignants.html" class="btn-retour">‚Üê Retour √† la liste du personnel</a>
</div>

<!-- Firebase -->
<script type="module">
import { db } from "./js/config.js";
import { collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const form = document.getElementById("ajouterEnseignantForm");
const successMsg = document.getElementById("successMsg");
const errorMsg = document.getElementById("errorMsg");

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  successMsg.textContent="";
  errorMsg.textContent="";

  const enseignantData = {
    nom: document.getElementById("nom").value.trim(),
    postNom: document.getElementById("postNom").value.trim(),
    prenom: document.getElementById("prenom").value.trim(),
    titre: document.getElementById("titre").value,
    statut: document.getElementById("statut").value,
    matiere: document.getElementById("matiere").value.trim(),
    createdAt: serverTimestamp()
  };

  try {
    await addDoc(collection(db, "enseignants"), enseignantData);
    successMsg.textContent = "‚úÖ Enseignant enregistr√© avec succ√®s !";
    form.reset();
  } catch(err) {
    console.error(err);
    errorMsg.textContent = "‚ùå Une erreur est survenue, veuillez r√©essayer.";
  }
});
</script>

</body>
</html>
